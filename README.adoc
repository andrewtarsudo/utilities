= Руководство пользователя
:imagesdir: docs/images
:stylesdir: css
:stylesheet: general.css
:pdf-themesdir: themes
:pdf-theme: base-theme.yml
:asciidoctorconfigdir: .

== Общая информация

В репозитории собраны небольшие скрипты, которые явно не тянут на отдельные проекты.

Руководства пользователя находятся в директории link:docs/[docs].

На данный момент доступны команды:

[horizontal]
link:docs/README_check_russian.adoc#check-russian[check-russian]:: команда для проверки наличия не переведенных слов в англоязычных файлах
link:docs/README_convert_tables.adoc#convert-tables[convert-tables]:: команда для извлечения таблиц из файлов docx в формат Markdown
link:docs/README_format_code.adoc#format-code[format-code]:: команда для форматирования блоков кода
link:docs/README_link_repair.adoc#link-repair[link-repair]:: команда для исправления ссылок в проекте
link:docs/README_list_files.adoc#list-files[list-files]:: команда для вывода файлов в директории с использованием ряда фильтров
link:docs/README_reduce_image.adoc#reduce-image[reduce-image]:: команда для сжатия файлов изображений
link:docs/README_repair_svg.adoc#repair-svg[repair-svg]:: команда для корректирования SVG-файлов
link:docs/README_table_cols.adoc#table-cols[table-cols]:: команда для задания ширин столбцов таблиц в файлах AsciiDoc
link:docs/README_terms.adoc#terms[terms]:: команда для получения расшифровок аббревиатур
link:docs/README_validate_yaml.adoc#validate-yaml[validate-yaml]:: команда для валидации YAML-файлов, используемых для генерации PDF

Вся документация для скриптов выше лежит в директории link:docs/[docs/].

Сгенерированные исполняемые файлы доступны в директории link:bin/[bin/]:

[horizontal]
Windows:: link:https://gitlab.com/tech_writers_protei/utilities/-/raw/main/bin/tw_utilities.exe?ref_type=heads[bin/tw_utilities.exe]
*nix/MacOS:: link:https://gitlab.com/tech_writers_protei/utilities/-/raw/main/bin/tw_utilities?ref_type=heads[bin/tw_utilities]

== Запуск команд

Все вызовы активируются через командную строку.

[source,bash,subs="attributes+"]
----
$ <path/to/{name}> COMMAND OPTIONS
----

Для использования любой команды необходимо в терминале ввести путь до исполняемого файла, команду, обязательные аргументы и требуемые опции.

[source,console,subs="attributes+"]
----
Использование:
{name}
list-files | check-russian | convert-tables | format-code | link-repair | reduce-image
| repair-svg | table-cols | terms | validate-yaml
-v/--version | --h/--help


  Набор скриптов для технических писателей

Опции:
  -v, --version                          Вывести версию скрипта на экран и завершить работу
  -h, --help                             Вывести справочную информацию на экран и завершить
                                         работу

Подкоманды:
  check-russian                          Команда для проверки наличия непереведенных слов
  convert-tables                         Команда для корректного извлечения таблиц из файлов
                                         docx в формат Markdown
  format-code                            Команда для форматирования блоков кода
  link-repair                            Команда для проверки и исправления ссылок в файлах
                                         документации
  list-files                             Команда для вывода файлов в директории
  reduce-image                           Команда для уменьшения размера изображений JPG, PNG
  repair-svg                             Команда для исправления файлов SVG
  table-cols                             Команда для задания ширины столбцам таблиц
  terms                                  Команда для вывода расшифровки аббревиатур
  validate-yaml                          Команда для валидации YAML-файла, используемого при
                                         генерации PDF
------------------------------------------------------------------------------------------------
----

=== Примеры

* Вызов справочной информации
+
[source,bash,subs="attributes+"]
----
$ {name} <command> --help
$ {name} check-russian --help
----
+
* Вызов команды с единственным аргументом
+
[source,bash,subs="attributes+"]
----
$ {name} <command> <ARGUMENT>
$ {name} convert-tables "..\Word File.docx"
----
+
* Вызов команды со множественными аргументами
+
[source,bash,subs="attributes+"]
----
$ {name} <command> <ARGUMENT> <ARGUMENT> <ARGUMENT>
$ {name} terms CAP MAP ISUP
----
+
* Вызов команды с опциями с единственными значениями
+
[source,bash,subs="attributes+"]
----
$ {name} <command> <option_1> <value_1> <option_N> <value_N>
$ {name} format-code --dir "..\Project" --length 80
----
+
* Вызов команды с опциями со множественными значениями
+
[source,bash,subs="attributes+"]
----
$ {name} <command> <option> <value_1> <value_2>
$ {name} repair-svg --file "..\Project\SOME_IMAGE.svg" "..\Project\ANOTHER_IMAGE.svg"
$ {name} <command> <option> <value_1> <option> <value_2>
$ {name} repair-svg --file "..\Project\SOME_IMAGE.svg" --file "..\Project\ANOTHER_IMAGE.svg"
$ {name} <command> <option> <value_1> <value_2> <option> <value_3>
$ {name} repair-svg --file "..\Project\SOME_IMAGE.svg" "..\Project\ANOTHER_IMAGE.svg" --file "..\Project\AND_ANOTHER_ONE.svg"
----
+
* Вызов команды с опциями, задаваемыми как флаг
+
[source,bash,subs="attributes+"]
----
$ {name} <command> <flag>
$ {name} list-files "..\folder" --recursive
$ {name} <command> <no-flag>
$ {name} list-files "..\folder" --no-recursive
----

[CAUTION]
====
Некоторые параметры взаимоисключающие, т.е. их нельзя задать одновременно.
В таком случае будет активирована ошибка `UsageError: Ошибка в задании команды: '<param>' не может использоваться одновременно с '<mutually exclusive params>'`.
====

== Некоторые рекомендации

. В IDE есть встроенная консоль.
Она способна выполнять все те же команды, что и Powershell/Terminal.
+
.Иконка консоли
image::find_console.png[align="center",width=960]
+
.Консоль в IDE
image::console_ide.png[align="center",width=960]
+
. Чтобы удобно и быстро получить путь до файла, можно выполнить следующие шаги:
+
include::docs/partials/get_path.adoc[]

:leveloffset: +1

include::docs/README_check_russian.adoc[]

include::docs/README_convert_tables.adoc[]

include::docs/README_format_code.adoc[]

include::docs/README_link_repair.adoc[]

include::docs/README_list_files.adoc[]

include::docs/README_reduce_image.adoc[]

include::docs/README_repair_svg.adoc[]

include::docs/README_table_cols.adoc[]

include::docs/README_terms.adoc[]

include::docs/README_validate_yaml.adoc[]

:leveloffset: -1
